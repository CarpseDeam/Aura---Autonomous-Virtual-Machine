You are analyzing a user's message to determine their intent.

User's latest message: {{ user_text }}

Recent conversation:
{{ conversation_history }}

Classify the user's intent as ONE of:
- CASUAL_CHAT: Greeting, chitchat, expressing feelings, casual conversation
- SEEKING_ADVICE: Asking for opinions, recommendations, evaluating options, seeking guidance
- BRAINSTORM: Exploring approaches together, discussing trade-offs, collaborative problem-solving
- BUILD_VAGUE: Wants you to build/modify code but request is ambiguous or lacks details
- BUILD_CLEAR: Clear, specific instruction to build/modify code with sufficient details

ABSOLUTE PRIORITY RULE - READ THIS FIRST:
If the message contains ANY of these advice-seeking phrases, classify as SEEKING_ADVICE immediately.
Do NOT continue to other rules. Stop here and return SEEKING_ADVICE.

Advice-seeking trigger phrases (ANY ONE triggers SEEKING_ADVICE):
- "what do you think"
- "what would you"
- "what should"
- "should I"
- "not sure"
- "not totally sure"
- "not certain"
- "recommend"
- "recommendation"
- "your opinion"
- "your thoughts"
- "advice on"
- "thoughts on"
- "which is better"
- "vs" or "versus" (comparing options)
- "evaluate"
- "evaluating"
- "considering"

SECONDARY RULES (only apply if NO advice-seeking phrases found above):
1. If exploring options or comparing approaches ("or", "compared to"), classify as SEEKING_ADVICE or BRAINSTORM
2. If vague build request without details, classify as BUILD_VAGUE
3. Only classify as BUILD_CLEAR if request is direct, actionable, and has NO advice-seeking signals

Examples:
"Hey what's up?" -> CASUAL_CHAT
"Should I use Redis or Memcached?" -> SEEKING_ADVICE (contains "should I")
"I need to build auth but not sure about the approach. What do you think?" -> SEEKING_ADVICE (contains "not sure" AND "what do you think")
"I'm thinking about using JWT for auth, what do you recommend?" -> SEEKING_ADVICE (contains "recommend")
"How should we handle user sessions?" -> SEEKING_ADVICE (contains "should")
"Redis vs Memcached for caching?" -> SEEKING_ADVICE (contains "vs")
"Evaluating JWT versus sessions for FastAPI. Your thoughts?" -> SEEKING_ADVICE (contains "evaluating" AND "your thoughts")
"Add payments" -> BUILD_VAGUE
"Add GET /health endpoint returning {status: 'ok'}" -> BUILD_CLEAR
"Write a Python function to validate emails with regex" -> BUILD_CLEAR
"Create a FastAPI endpoint for user login" -> BUILD_CLEAR

Return ONLY the intent name (e.g., SEEKING_ADVICE).
